<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://unpkg.com/tailwindcss@^2.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" type="image/png"
        href="https://cdn0.iconfinder.com/data/icons/fruity-1/100/fruit_food_colour-47-1024.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        .group:hover .group-hover\:block {
            display: block;
        }

        .hover\:w-64:hover {
            width: 45%;
        }

        ::-webkit-scrollbar {
            width: 2px;
            height: 2px;
        }

        ::-webkit-scrollbar-button {
            width: 0px;
            height: 0px;
        }

        ::-webkit-scrollbar-thumb {
            background: #007ace;
            /* Blue color */
            border: 0px none #ffffff;
            border-radius: 50px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #005e8a;
            /* Darker blue */
        }

        ::-webkit-scrollbar-thumb:active {
            background: #00395e;
            /* Darkest blue */
        }

        ::-webkit-scrollbar-track {
            background: #ffffff;
            /* White */
            border: 0px none #ffffff;
            border-radius: 50px;
        }

        ::-webkit-scrollbar-track:hover {
            background: #f2f2f2;
            /* Light gray */
        }

        ::-webkit-scrollbar-track:active {
            background: #d9d9d9;
            /* Slightly darker gray */
        }

        ::-webkit-scrollbar-corner {
            background: transparent;
        }
    </style>
</head>

<body>
    <div class="h-screen w-full flex antialiased text-gray-800 bg-white overflow-hidden">
        <div class="flex-1 flex flex-col">
            <main class="flex-grow flex flex-row min-h-0">
                <section
                    class="flex flex-col flex-none overflow-auto w-24 hover:w-64 group lg:max-w-sm md:w-2/5 transition-all duration-300 ease-in-out">
                    <!-- Sidebar Header -->
                    <div class="header p-4 flex flex-row justify-between items-center flex-none">
                        <a href="/logout" class="flex items-center text-lg text-blue-500 hover:text-blue-600">
                            <i class="fas fa-sign-out-alt mr-2" style="font-size: 30px;"></i>
                        </a>
                        <p class="text-md font-bold hidden md:block group-hover:block text-blue-500 text-2xl">Chats</p>
                        <a
                            class="create-chat-btn block rounded-full hover:bg-blue-600 bg-blue-500 w-10 h-10 p-2 hidden md:block group-hover:block cursor-pointer">
                            <svg viewBox="0 0 24 24" class="w-full h-full fill-current text-white">
                                <path
                                    d="M6.3 12.3l10-10a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-.7.3H7a1 1 0 0 1-1-1v-4a1 1 0 0 1 .3-.7zM8 16h2.59l9-9L17 4.41l-9 9V16zm10-2a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h6a1 1 0 0 1 0 2H4v14h14v-6z" />
                            </svg>
                        </a>
                    </div>
                    <!-- Search Bar -->
                    <div class="search-box p-4 flex-none">
                        <form onsubmit="">
                            <div class="relative">
                                <label>
                                    <input
                                        class="rounded-full py-2 pr-6 pl-10 w-full border border-blue-800 focus:border-blue-700 bg-blue-100 focus:bg-blue-200 focus:outline-none text-gray-800 focus:shadow-md transition duration-300 ease-in"
                                        type="text" value="" placeholder="Search Messenger" />
                                    <span class="absolute top-0 left-0 mt-2 ml-3 inline-block">
                                        <svg viewBox="0 0 24 24" class="w-6 h-6 text-blue-500">
                                            <path fill="currentColor"
                                                d="M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" />
                                        </svg>
                                    </span>
                                </label>
                            </div>
                        </form>
                    </div>


                    <!-- Room List -->
                    <div class="contacts p-2 flex-1 overflow-y-scroll">
                        {% for room in rooms %}
                        <a class="contact-item mb-2 flex justify-between items-center p-3 hover:bg-blue-100 rounded-lg relative shadow-md border border-gray-100 hover:border-blue-300"
                            href="/chat/{{room.room_name}}">
                            <div class="w-16 h-16 relative flex flex-shrink-0 rounded-full overflow-hidden">
                                <img class="w-full h-full object-cover"
                                    src="https://loremflickr.com/640/480?lock=1{{ room.member_id }}" alt="chat-user" />
                            </div>
                            <div class="info-container flex-auto min-w-0 ml-4 mr-6 hidden md:block group-hover:block">
                                <p class="room-name text-blue-500 font-bold">{{ room.room_name }}</p>
                                <div class="flex items-center justify-between text-sm text-gray-600">
                                    <div class="message-info min-w-0">
                                        <p class="truncate">
                                            {% if room.get_last_message() %}
                                            {{ room.get_last_message().sender_name }}: {{
                                            room.get_last_message().message }}
                                            {% else %}
                                            No messages yet
                                            {% endif %}
                                        </p>
                                    </div>
                                    <p class="timestamp ml-2 whitespace-no-wrap text-blue-500">
                                        {% if room.get_last_message() is not none %}
                                        {{ room.get_last_message().created_at}}
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </a>
                        {% endfor %}
                    </div>

                    {% include '_create_chat_modal.html' %}
                </section>

                <!-- Chats -->
                <section class="flex flex-col flex-auto border-l border-gray-200">
                    <div class="chat-header px-6 py-4 flex flex-row flex-none justify-between items-center shadow">
                        <div class="flex">
                            <div class="w-12 h-12 mr-4 relative flex flex-shrink-0">
                                <!-- check this picture for integrity -->
                                <img class="shadow-md rounded-full w-full h-full object-cover"
                                    src="https://loremflickr.com/640/480?lock=1{{ rooms.member_id }}" alt="chat-user" />
                            </div>
                            <div class="text-sm">
                                <p class="font-bold">{{ room.name }}</p>
                                <p>Active 1h ago</p>
                            </div>
                        </div>

                        <div class="icons-container flex mr-5 gap-3">
                            <button>
                                <i class="fas fa-trash text-red-500 hover:text-red-600"></i>
                            </button>
                            <button>
                                <i class="fas fa-edit text-blue-500 hover:text-blue-600"></i>
                            </button>
                            <button>
                                <i class="fas fa-user-plus text-green-500 hover:text-green-600"></i>
                            </button>
                        </div>
                    </div>
                    <div class="chat-body p-4 flex-1 overflow-y-scroll">
                        <div class="flex flex-row justify-start">
                            <div class="w-8 h-8 relative flex flex-shrink-0 mr-4">
                                <img class="shadow-md rounded-full w-full h-full object-cover" alt="chat-user"
                                    src="https://avatars.githubusercontent.com/u/10018" />
                                <!-- dont forget to put back sender id -->
                            </div>
                            <div class="messages text-sm text-gray-700 grid grid-flow-row gap-2">
                                <div class="flex items-center group">
                                    <p
                                        class="px-6 py-3 rounded-t-full rounded-r-full bg-gray-200 max-w-xs lg:max-w-md text-gray-800">
                                        Hey! How are you?
                                    </p>
                                    <button type="button"
                                        class="hidden group-hover:block flex flex-shrink-0 focus:outline-none mx-2 block rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-200 bg-gray-200 w-8 h-8 p-2">
                                        <svg viewBox="0 0 20 20" class="w-full h-full fill-current">
                                            <path
                                                d="M10.001,7.8C8.786,7.8,7.8,8.785,7.8,10s0.986,2.2,2.201,2.2S12.2,11.215,12.2,10S11.216,7.8,10.001,7.8z M3.001,7.8C1.786,7.8,0.8,8.785,0.8,10s0.986,2.2,2.201,2.2S5.2,11.214,5.2,10S4.216,7.8,3.001,7.8z M17.001,7.8C15.786,7.8,14.8,8.785,14.8,10s0.986,2.2,2.201,2.2S19.2,11.215,19.2,10S18.216,7.8,17.001,7.8z" />
                                        </svg>
                                    </button>
                                    <button type="button"
                                        class="hidden group-hover:block flex flex-shrink-0 focus:outline-none mx-2 block rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-200 bg-gray-200 w-8 h-8 p-2">
                                        <svg viewBox="0 0 20 20" class="w-full h-full fill-current">
                                            <path
                                                d="M19,16.685c0,0-2.225-9.732-11-9.732V2.969L1,9.542l7,6.69v-4.357C12.763,11.874,16.516,12.296,19,16.685z" />
                                        </svg>
                                    </button>
                                    <button type="button"
                                        class="hidden group-hover:block flex flex-shrink-0 focus:outline-none mx-2 block rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-200 bg-gray-200 w-8 h-8 p-2">
                                        <svg viewBox="0 0 24 24" class="w-full h-full fill-current">
                                            <path
                                                d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-3.54-4.46a1 1 0 0 1 1.42-1.42 3 3 0 0 0 4.24 0 1 1 0 0 1 1.42 1.42 5 5 0 0 1-7.08 0zM9 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm6 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-row justify-end">
                            <div class="messages text-sm text-white grid grid-flow-row gap-2">
                                <div class="flex items-center flex-row-reverse group">
                                    <p
                                        class="px-6 py-3 rounded-t-full rounded-l-full bg-blue-500 max-w-xs lg:max-w-md text-white">
                                        Hey! How are you?
                                    </p>
                                    <button type="button"
                                        class="hidden group-hover:block flex flex-shrink-0 focus:outline-none mx-2 block rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-200 bg-gray-200 w-8 h-8 p-2">
                                        <svg viewBox="0 0 20 20" class="w-full h-full fill-current">
                                            <path
                                                d="M10.001,7.8C8.786,7.8,7.8,8.785,7.8,10s0.986,2.2,2.201,2.2S12.2,11.215,12.2,10S11.216,7.8,10.001,7.8z M3.001,7.8C1.786,7.8,0.8,8.785,0.8,10s0.986,2.2,2.201,2.2S5.2,11.214,5.2,10S4.216,7.8,3.001,7.8z M17.001,7.8C15.786,7.8,14.8,8.785,14.8,10s0.986,2.2,2.201,2.2S19.2,11.215,19.2,10S18.216,7.8,17.001,7.8z" />
                                        </svg>
                                    </button>
                                    <button type="button"
                                        class="hidden group-hover:block flex flex-shrink-0 focus:outline-none mx-2 block rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-200 bg-gray-200 w-8 h-8 p-2">
                                        <svg viewBox="0 0 20 20" class="w-full h-full fill-current">
                                            <path
                                                d="M19,16.685c0,0-2.225-9.732-11-9.732V2.969L1,9.542l7,6.69v-4.357C12.763,11.874,16.516,12.296,19,16.685z" />
                                        </svg>
                                    </button>
                                    <button type="button"
                                        class="hidden group-hover:block flex flex-shrink-0 focus:outline-none mx-2 block rounded-full text-gray-500 hover:text-gray-900 hover:bg-gray-200 bg-gray-200 w-8 h-8 p-2">
                                        <svg viewBox="0 0 24 24" class="w-full h-full fill-current">
                                            <path
                                                d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-3.54-4.46a1 1 0 0 1 1.42-1.42 3 3 0 0 0 4.24 0 1 1 0 0 1 1.42 1.42 5 5 0 0 1-7.08 0zM9 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm6 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="chat-footer flex items-center justify-center mb-2">
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <label>
                                    <input
                                        class="rounded-full py-2 px-24 w-full border border-gray-200 focus:border-blue-500 bg-gray-200 focus:bg-white focus:outline-none text-gray-800 focus:shadow-md transition duration-300 ease-in"
                                        type="text" value="" placeholder="Enter message" />
                                </label>
                            </div>
                            <button type="button"
                                class="flex items-center justify-center w-12 h-12 bg-blue-500 rounded-full focus:outline-none">
                                <i class="fas fa-paper-plane text-white hover:text-blue-600"></i>
                            </button>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

</body>

</html>